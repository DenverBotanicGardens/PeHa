---
title: "PeHa data check"
author: "Michelle DePrenger-Levin"
date: "Thursday, September 10, 2015"
output: html_document
---
```{r}
library(ggplot2)
library(reshape2)
library(reshape)
```

ctrl+Alt+c will run a chunck of code

gather climate data from WWDT and/or <http://www.prism.oregonstate.edu/explorer/>
First 6 lines of code are metadata
first column is YYYY-MM and then data in metric

```{r}
ae_p <- read.csv(path.expand("Q:/Research/All_Projects_by_Species/Penstemon SPECIES/Penstemon_harringtonii/R_code_PeHa/R_tables/AE_precip_2015.csv"), skip=6)
head(ae_p)
dl_p <- read.csv(path.expand("Q:/Research/All_Projects_by_Species/Penstemon SPECIES/Penstemon_harringtonii/R_code_PeHa/R_tables/DL_precip_2015.csv"), skip=6)
ae_tmax <- read.csv(path.expand("Q:/Research/All_Projects_by_Species/Penstemon SPECIES/Penstemon_harringtonii/R_code_PeHa/R_tables/AE_tmax_2015.csv"), skip=6)
dl_tmax <- read.csv(path.expand("Q:/Research/All_Projects_by_Species/Penstemon SPECIES/Penstemon_harringtonii/R_code_PeHa/R_tables/DL_maxtemp_2015.csv"), skip=6)
ae_tmin <- read.csv(path.expand("Q:/Research/All_Projects_by_Species/Penstemon SPECIES/Penstemon_harringtonii/R_code_PeHa/R_tables/AE_tmin_2015.csv"), skip=6)
dl_tmin <- read.csv(path.expand("Q:/Research/All_Projects_by_Species/Penstemon SPECIES/Penstemon_harringtonii/R_code_PeHa/R_tables/DL_tmin_2015.csv"), skip=6)

ae.climate <- data.frame(ae_p,ae_tmax,ae_tmin)
head(ae.climate)
ae.climate$Site <- "Above Eagle"

dl.climate <- data.frame(dl_p,dl_tmax,dl_tmin)
head(dl.climate)
dl.climate$Site <- "Dry Lake"

peha.climate <- rbind(ae.climate,dl.climate)
peha.climate$Year <- substr(ae.climate$Date,1,4)
peha.climate$Month <- substr(ae.climate$Date,6,7)

head(peha.climate)
peha.c <- peha.climate[,c(2,4,6:9)]
names(peha.c) <- c("Precip","Tmax","Tmin","Site","Year","Month")

apply(subset(peha.c, select = c(Site,Year)), 1, function(x) mean(x, na.rm = TRUE))
mapply(mean, peha.c[,1:3])

expand.grid(unique(peha.c$Site),unique(peha.c$Year))
sapply(expand.grid(unique(peha.c$Site),unique(peha.c$Year)), )

```



```{r}
peha_sum <- read.csv(path.expand("Q:/Research/All_Projects_by_Species/Penstemon SPECIES/Penstemon_harringtonii/R_code_PeHa/R_tables/peha_2015_summary.csv"))

head(peha_sum)
tail(peha_sum)
ggplot(peha_sum, aes(Year,Jan)) +
  geom_line() +
  facet_wrap(~Site)
```



```{r}
peha <- read.csv(path.expand("Q:/Research/All_Projects_by_Species/Penstemon SPECIES/Penstemon_harringtonii/R_code_PeHa/R_tables/peha2015.csv"))

head(peha)
table(peha$Site, peha$Year)
```



```{r, echo=FALSE}
plot(cars)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
